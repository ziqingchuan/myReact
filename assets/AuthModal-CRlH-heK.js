import{j as a}from"./markdown-vendor-C3Boe-Qz.js";import{r as s}from"./react-vendor-D-XgqoRR.js";import"./index-D_lzfyp1.js";import{K as e,X as l}from"./icons-vendor-BMbW6_tA.js";import"./supabase-vendor-BaswEe3z.js";function o({isOpen:o,onClose:r,onSubmit:d,isDark:m=!0}){const[n,t]=s.useState(""),[i,c]=s.useState(""),[u,j]=s.useState(!1),h=()=>{t(""),c(""),r()};return o?a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal "+(m?"dark":""),children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("div",{className:"modal-header-with-icon",children:[a.jsx(e,{size:20,className:"modal-header-icon info"}),a.jsx("h2",{className:"modal-title",children:"身份验证"})]}),a.jsx("button",{onClick:h,className:"modal-close-btn",children:a.jsx(l,{size:20})})]}),a.jsxs("form",{onSubmit:async a=>{if(a.preventDefault(),n.trim()){j(!0);try{await d(n),t(""),c(""),r()}catch(s){c(s.message||"密钥错误，请重试"),t("")}finally{j(!1)}}else c("请输入密钥")},className:"modal-form",children:[a.jsxs("div",{className:"modal-form-group",children:[a.jsx("label",{className:"modal-form-label",children:"请输入管理员密钥"}),a.jsx("input",{type:"password",value:n,onChange:a=>{t(a.target.value),c("")},placeholder:"输入密钥以开启编辑权限",className:"modal-form-input "+(m?"dark":""),autoFocus:!0}),i&&a.jsx("p",{className:"modal-form-error "+(m?"dark":""),children:i})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",onClick:h,className:"modal-btn modal-btn-secondary "+(m?"dark":""),disabled:u,children:"取消"}),a.jsx("button",{type:"submit",className:"modal-btn modal-btn-info "+(m?"dark":""),disabled:u,children:u?"验证中...":"验证"})]})]})]})}):null}export{o as default};
