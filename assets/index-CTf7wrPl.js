const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ArticleFormModal-BrMhYA6F.js","assets/markdown-vendor-C07DKSYQ.js","assets/react-vendor-D-XgqoRR.js","assets/CustomSelect-CsdhhR8D.js","assets/icons-vendor-DsJKkkoD.js","assets/supabase-vendor-BaswEe3z.js","assets/DirectoryFormModal-Bb9WwZbc.js"])))=>i.map(i=>d[i]);
import{j as e,M as t,r,a as n}from"./markdown-vendor-C07DKSYQ.js";import{a as i,r as s,R as a}from"./react-vendor-D-XgqoRR.js";import{c as o}from"./supabase-vendor-BaswEe3z.js";import{A as l,X as c,P as d,F as m,a as u,C as h,b as x,c as p,d as g,e as f,f as y,T as b,g as j,M as w,h as v,i as N,j as S,k as D,B as C,E as _,l as A,m as k}from"./icons-vendor-DsJKkkoD.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var I={},F=i;I.createRoot=F.createRoot,I.hydrateRoot=F.hydrateRoot;const E={},L=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/myReact/"+e}(e))in E)return;E[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,r&&i.setAttribute("nonce",r),document.head.appendChild(i),t?new Promise((t,r)=>{i.addEventListener("load",t),i.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};let T=[{id:"1",name:"React åŸºç¡€",parent_id:null,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z",articles:[{id:"1",title:"React ç®€ä»‹",created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:"2",title:"åˆ›å»ºç¬¬ä¸€ä¸ªç»„ä»¶",created_at:"2024-01-02T00:00:00Z",updated_at:"2024-01-02T00:00:00Z"}]},{id:"2",name:"React Hooks",parent_id:null,created_at:"2024-01-02T00:00:00Z",updated_at:"2024-01-02T00:00:00Z",articles:[{id:"3",title:"useState Hook",created_at:"2024-01-03T00:00:00Z",updated_at:"2024-01-03T00:00:00Z"}]},{id:"3",name:"é«˜çº§æ¦‚å¿µ",parent_id:null,created_at:"2024-01-03T00:00:00Z",updated_at:"2024-01-03T00:00:00Z",articles:[]}],O=[...[{id:"1",title:"React ç®€ä»‹",content:"# React ç®€ä»‹\n\nReact æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ï¼Œç”± Facebook å¼€å‘å¹¶ç»´æŠ¤ã€‚å®ƒé‡‡ç”¨ç»„ä»¶åŒ–çš„å¼€å‘æ–¹å¼ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿæ„å»ºå¯å¤ç”¨çš„ UI ç»„ä»¶ã€‚\n\n## ä¸ºä»€ä¹ˆé€‰æ‹© Reactï¼Ÿ\n\n### 1. ç»„ä»¶åŒ–å¼€å‘\nReact å°† UI æ‹†åˆ†æˆç‹¬ç«‹çš„ã€å¯å¤ç”¨çš„ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„çŠ¶æ€å’Œé€»è¾‘ã€‚\n\n```jsx\nfunction Welcome(props) {\n  return <h1>Hello, {props.name}!</h1>;\n}\n```\n\n### 2. è™šæ‹Ÿ DOM\nReact ä½¿ç”¨è™šæ‹Ÿ DOM æ¥æé«˜æ€§èƒ½ï¼Œåªæ›´æ–°å®é™…å‘ç”Ÿå˜åŒ–çš„éƒ¨åˆ†ã€‚\n\n### 3. å•å‘æ•°æ®æµ\næ•°æ®ä»çˆ¶ç»„ä»¶æµå‘å­ç»„ä»¶ï¼Œä½¿åº”ç”¨çš„æ•°æ®æµæ›´åŠ å¯é¢„æµ‹ã€‚\n\n### 4. ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ\nReact æ‹¥æœ‰åºå¤§çš„ç¤¾åŒºå’Œä¸°å¯Œçš„ç¬¬ä¸‰æ–¹åº“ã€‚\n\n## æ ¸å¿ƒæ¦‚å¿µ\n\n- **ç»„ä»¶ (Components)**: UI çš„åŸºæœ¬æ„å»ºå—\n- **JSX**: JavaScript çš„è¯­æ³•æ‰©å±•\n- **Props**: ç»„ä»¶çš„å±æ€§\n- **State**: ç»„ä»¶çš„çŠ¶æ€\n\n## å¼€å§‹å­¦ä¹ \n\nå‡†å¤‡å¥½å¼€å§‹ä½ çš„ React ä¹‹æ—…äº†å—ï¼Ÿè®©æˆ‘ä»¬ä»åˆ›å»ºç¬¬ä¸€ä¸ªç»„ä»¶å¼€å§‹ï¼",directory_id:"1",is_published:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z",directories:{id:"1",name:"React åŸºç¡€"}},{id:"2",title:"åˆ›å»ºç¬¬ä¸€ä¸ªç»„ä»¶",content:'# åˆ›å»ºç¬¬ä¸€ä¸ªç»„ä»¶\n\nåœ¨ React ä¸­ï¼Œç»„ä»¶æ˜¯æ„å»ºç”¨æˆ·ç•Œé¢çš„åŸºæœ¬å•ä½ã€‚è®©æˆ‘ä»¬å­¦ä¹ å¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨ç»„ä»¶ã€‚\n\n## å‡½æ•°ç»„ä»¶\n\næœ€ç®€å•çš„ç»„ä»¶æ˜¯å‡½æ•°ç»„ä»¶ï¼š\n\n```jsx\nfunction Greeting() {\n  return <h1>Hello, World!</h1>;\n}\n```\n\n## ä½¿ç”¨ç»„ä»¶\n\nåˆ›å»ºç»„ä»¶åï¼Œä½ å¯ä»¥åƒä½¿ç”¨ HTML æ ‡ç­¾ä¸€æ ·ä½¿ç”¨å®ƒï¼š\n\n```jsx\nfunction App() {\n  return (\n    <div>\n      <Greeting />\n      <Greeting />\n    </div>\n  );\n}\n```\n\n## å¸¦å‚æ•°çš„ç»„ä»¶\n\nç»„ä»¶å¯ä»¥æ¥æ”¶å‚æ•°ï¼ˆç§°ä¸º propsï¼‰ï¼š\n\n```jsx\nfunction Greeting(props) {\n  return <h1>Hello, {props.name}!</h1>;\n}\n\nfunction App() {\n  return (\n    <div>\n      <Greeting name="Alice" />\n      <Greeting name="Bob" />\n    </div>\n  );\n}\n```\n\n## JSX è§„åˆ™\n\n1. å¿…é¡»è¿”å›å•ä¸ªæ ¹å…ƒç´ \n2. ä½¿ç”¨ `className` è€Œä¸æ˜¯ `class`\n3. æ‰€æœ‰æ ‡ç­¾å¿…é¡»é—­åˆ\n4. ä½¿ç”¨é©¼å³°å‘½åæ³•\n\n```jsx\nfunction MyComponent() {\n  return (\n    <div className="container">\n      <img src="image.jpg" alt="Description" />\n      <input type="text" />\n    </div>\n  );\n}\n```',directory_id:"1",is_published:!0,created_at:"2024-01-02T00:00:00Z",updated_at:"2024-01-02T00:00:00Z",directories:{id:"1",name:"React åŸºç¡€"}},{id:"3",title:"useState Hook",content:"# useState Hook\n\n`useState` æ˜¯ React ä¸­æœ€å¸¸ç”¨çš„ Hookï¼Œç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ çŠ¶æ€ã€‚\n\n## åŸºæœ¬ç”¨æ³•\n\n```jsx\nimport { useState } from 'react';\n\nfunction Counter() {\n  const [count, setCount] = useState(0);\n\n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={() => setCount(count + 1)}>\n        Click me\n      </button>\n    </div>\n  );\n}\n```\n\n## çŠ¶æ€æ›´æ–°\n\n### ç›´æ¥è®¾ç½®æ–°å€¼\n```jsx\nconst [name, setName] = useState('');\nsetName('Alice');\n```\n\n### åŸºäºå‰ä¸€ä¸ªçŠ¶æ€æ›´æ–°\n```jsx\nconst [count, setCount] = useState(0);\nsetCount(prevCount => prevCount + 1);\n```\n\n## æ³¨æ„äº‹é¡¹\n\n1. çŠ¶æ€æ›´æ–°æ˜¯å¼‚æ­¥çš„\n2. ä¸è¦ç›´æ¥ä¿®æ”¹çŠ¶æ€å¯¹è±¡\n3. ä½¿ç”¨å‡½æ•°å¼æ›´æ–°é¿å…é—­åŒ…é—®é¢˜",directory_id:"2",is_published:!0,created_at:"2024-01-03T00:00:00Z",updated_at:"2024-01-03T00:00:00Z",directories:{id:"2",name:"React Hooks"}}]];const z="https://vtslbeziohxlvmibthfp.supabase.co",R=z.includes("your-project-id");let M=null;if(!R)try{M=o(z,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ0c2xiZXppb2h4bHZtaWJ0aGZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4ODM4OTYsImV4cCI6MjA3OTQ1OTg5Nn0.S2NRwGzMNMC4e3JLdHTxkFYFHtyTq7Ja_vqptwJyGkM")}catch(re){}function Z(e,t){const r=e.map(e=>({...e,articles:t.filter(t=>t.directory_id===e.id)}));function n(e){const t=r.filter(t=>t.parent_id===e.id);return t.length>0&&(e.children=t.map(e=>n(e))),e}return r.filter(e=>!e.parent_id).map(e=>n(e))}const P={async getDirectoryTree(){if(R||!M)return new Promise(e=>{setTimeout(()=>{const t=Z(T,O);e(t)},100)});try{const{data:e,error:t}=await M.from("directories").select("*").order("created_at");if(t)throw t;const{data:r,error:n}=await M.from("articles").select("id, title, directory_id, created_at, updated_at").eq("is_published",!0).order("created_at");if(n)throw n;return Z(e,r)}catch(re){return Z(T,O)}},async getArticle(e){if(R||!M)return new Promise(t=>{setTimeout(()=>{const r=O.find(t=>t.id===e);t(r||null)},100)});try{const{data:t,error:r}=await M.from("articles").select("\n          *,\n          directories (\n            id,\n            name\n          )\n        ").eq("id",e).single();if(r)throw r;return t}catch(re){return O.find(t=>t.id===e)||null}},async createDirectory(e){if(R||!M)return new Promise((t,r)=>{setTimeout(()=>{try{const r={id:Date.now().toString(),...e,parent_id:e.parent_id||null,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),articles:[]};T.push(r),t(r)}catch(re){r(re)}},100)});try{const{data:t,error:r}=await M.from("directories").insert(e).select().single();if(r)throw r;return t}catch(re){const r={id:Date.now().toString(),...e,parent_id:e.parent_id||null,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),articles:[]};return T.push(r),r}},async updateDirectory(e,t){if(R||!M)return new Promise((r,n)=>{setTimeout(()=>{try{const i=T.findIndex(t=>t.id===e);if(i>-1){const n=T[i].parent_id,s=t.parent_id||null;if(T[i]={...T[i],...t,parent_id:s,updated_at:(new Date).toISOString()},n!==s){const t=e=>{O.forEach(t=>{t.directory_id===e&&(t.updated_at=(new Date).toISOString())});T.filter(t=>t.parent_id===e).forEach(e=>t(e.id))};t(e)}r(T[i])}else n(new Error("ç›®å½•ä¸å­˜åœ¨"))}catch(re){n(re)}},100)});try{const{data:r,error:n}=await M.from("directories").update(t).eq("id",e).select().single();if(n)throw n;return r}catch(re){const n=T.findIndex(t=>t.id===e);if(n>-1){const r=T[n].parent_id,i=t.parent_id||null;if(T[n]={...T[n],...t,parent_id:i,updated_at:(new Date).toISOString()},r!==i){const t=e=>{O.forEach(t=>{t.directory_id===e&&(t.updated_at=(new Date).toISOString())});T.filter(t=>t.parent_id===e).forEach(e=>t(e.id))};t(e)}return T[n]}throw re}},async deleteDirectory(e){if(R||!M)return new Promise(t=>{setTimeout(()=>{const r=e=>{T.filter(t=>t.parent_id===e).forEach(e=>r(e.id));O.filter(t=>t.directory_id===e).forEach(e=>{const t=O.findIndex(t=>t.id===e.id);t>-1&&O.splice(t,1)});const t=T.findIndex(t=>t.id===e);t>-1&&T.splice(t,1)};r(e),t()},100)});try{const{error:t}=await M.from("directories").delete().eq("id",e);if(t)throw t}catch(re){const r=e=>{T.filter(t=>t.parent_id===e).forEach(e=>r(e.id));O.filter(t=>t.directory_id===e).forEach(e=>{const t=O.findIndex(t=>t.id===e.id);t>-1&&O.splice(t,1)});const t=T.findIndex(t=>t.id===e);t>-1&&T.splice(t,1)};r(e)}},async createArticle(e){if(R||!M)return new Promise(t=>{setTimeout(()=>{const r={id:Date.now().toString(),...e,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),directories:T.find(t=>t.id===e.directory_id)||null};O.push(r),t(r)},100)});try{const{data:t,error:r}=await M.from("articles").insert(e).select().single();if(r)throw r;return t}catch(re){const r={id:Date.now().toString(),...e,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};return O.push(r),r}},async updateArticle(e,t){if(R||!M)return new Promise(r=>{setTimeout(()=>{const n=O.findIndex(t=>t.id===e);n>-1&&(O[n]={...O[n],...t,updated_at:(new Date).toISOString()},r(O[n]))},100)});try{const{data:r,error:n}=await M.from("articles").update(t).eq("id",e).select().single();if(n)throw n;return r}catch(re){const n=O.findIndex(t=>t.id===e);if(n>-1)return O[n]={...O[n],...t,updated_at:(new Date).toISOString()},O[n];throw re}},async deleteArticle(e){if(R||!M)return new Promise(t=>{setTimeout(()=>{const r=O.findIndex(t=>t.id===e);r>-1&&O.splice(r,1),t()},100)});try{const{error:t}=await M.from("articles").delete().eq("id",e);if(t)throw t}catch(re){const r=O.findIndex(t=>t.id===e);r>-1&&O.splice(r,1)}},async searchArticles(e){if(R||!M)return new Promise(t=>{setTimeout(()=>{let r=O.filter(e=>e.is_published);if(e&&e.trim()){const t=e.toLowerCase();r=r.filter(e=>e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t))}t(r.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)))},100)});try{if(!e.trim()){const{data:e,error:t}=await M.from("articles").select("\n            *,\n            directories (\n              id,\n              name\n            )\n          ").eq("is_published",!0).order("created_at",{ascending:!1});if(t)throw t;return e}const{data:t,error:r}=await M.from("articles").select("\n          *,\n          directories (\n            id,\n            name\n          )\n        ").or(`title.ilike.%${e}%,content.ilike.%${e}%`).eq("is_published",!0).order("created_at",{ascending:!1});if(r)throw r;return t}catch(re){return O.filter(e=>e.is_published)}}};function q({isOpen:t,onClose:r,onConfirm:n,title:i,message:s,confirmText:a="ç¡®è®¤",cancelText:o="å–æ¶ˆ",type:d="danger"}){if(!t)return null;const m={danger:{icon:"text-red-600",button:"bg-red-600 hover:bg-red-700 focus:ring-red-500"},warning:{icon:"text-yellow-600",button:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"},info:{icon:"text-blue-600",button:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}}[d];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full bg-gray-100 ${m.icon}`,children:e.jsx(l,{size:20})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i})]}),e.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded-full text-gray-400 hover:text-gray-600",children:e.jsx(c,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 mb-6",children:s}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 focus:ring-2 focus:ring-gray-500 focus:border-transparent",children:o}),e.jsx("button",{onClick:()=>{n(),r()},className:`px-4 py-2 text-white rounded-md focus:ring-2 focus:border-transparent ${m.button}`,children:a})]})]})]})})}function $({onItemClick:t,onArticleSelect:r,collapsed:n,onToggleCollapse:i,onEditArticle:a,onCreateArticle:o,onEditDirectory:l,onCreateDirectory:c,directories:w=[],directoriesLoading:v=!1,onLoadDirectories:N,selectedArticle:S=null}){const[D,C]=s.useState(new Set),[_,A]=s.useState(!1),[k,I]=s.useState({isOpen:!1,type:"danger",title:"",message:"",onConfirm:null});s.useEffect(()=>{if(w.length>0){const e=new Set,t=r=>{r.forEach(r=>{e.add(r.id),r.children&&r.children.length>0&&t(r.children)})};t(w),C(e)}},[w]);const F=(n,i=0)=>{const s=D.has(n.id),c=n.articles&&n.articles.length>0,d=n.children&&n.children.length>0,m=c||d;return e.jsxs("div",{className:"select-none",children:[e.jsxs("div",{className:"group flex items-center py-2 px-3 hover:bg-gray-50",style:{paddingLeft:12+16*i+"px"},children:[e.jsxs("div",{className:"flex items-center flex-1 cursor-pointer",onClick:()=>m&&(e=>{const t=new Set(D);t.has(e)?t.delete(e):t.add(e),C(t)})(n.id),children:[m?e.jsxs(e.Fragment,{children:[s?e.jsx(h,{size:16,className:"text-gray-400 mr-1"}):e.jsx(x,{size:16,className:"text-gray-400 mr-1"}),s?e.jsx(p,{size:16,className:"text-gray-600 mr-2"}):e.jsx(g,{size:16,className:"text-gray-600 mr-2"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 mr-1"}),e.jsx(g,{size:16,className:"text-gray-600 mr-2"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-700 truncate flex-1",title:n.name,children:n.name})]}),e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 flex items-center space-x-1 ml-2",children:[e.jsx("button",{onClick:()=>l&&l(n),className:"p-1 hover:bg-gray-200 rounded text-gray-500 hover:text-gray-700",title:"ç¼–è¾‘ç›®å½•",children:e.jsx(f,{size:12})}),e.jsx("button",{onClick:()=>o&&o(n.id),className:"p-1 hover:bg-gray-200 rounded text-gray-500 hover:text-gray-700",title:"åœ¨æ­¤ç›®å½•ä¸‹æ–°å»ºæ–‡ç« ",children:e.jsx(y,{size:14})}),e.jsx("button",{onClick:()=>{var e;I({isOpen:!0,type:"danger",title:"åˆ é™¤ç›®å½•",message:`è¯¥æ“ä½œä¼šåˆ é™¤ç›®å½•"${(e=n).name}"åŠå…¶ä¸­å…¨éƒ¨æ–‡ç« ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ`,onConfirm:async()=>{A(!0);try{await P.deleteDirectory(e.id),await N(!0),window.dispatchEvent(new CustomEvent("directoryDeleted",{detail:{directoryId:e.id}}))}catch(re){alert("åˆ é™¤å¤±è´¥: "+re.message)}finally{A(!1)}}})},className:"p-1 hover:bg-gray-200 rounded text-gray-500 hover:text-red-600",title:"åˆ é™¤ç›®å½•",children:e.jsx(b,{size:12})})]})]}),s&&e.jsxs("div",{children:[c&&n.articles.map(n=>{const s=S&&S.id===n.id;return e.jsxs("div",{className:"group flex items-center py-2 px-3 hover:bg-gray-50 "+(s?"bg-blue-50 border-l-2 border-blue-600":""),style:{paddingLeft:28+16*i+"px"},children:[e.jsxs("button",{onClick:()=>{r&&r(n.id),t&&t()},className:"flex-1 flex items-center text-left "+(s?"text-blue-600 font-medium":"text-gray-600 hover:text-gray-900"),children:[e.jsx(j,{size:14,className:"mr-2 "+(s?"text-blue-600":"text-gray-400")}),e.jsx("span",{className:"text-sm",children:n.title})]}),e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 flex items-center space-x-1 ml-2",children:[e.jsx("button",{onClick:()=>(async e=>{try{const t=await P.getArticle(e.id);a&&a(t)}catch(re){alert("åŠ è½½æ–‡ç« å¤±è´¥: "+re.message)}})(n),className:"p-1 hover:bg-gray-200 rounded text-gray-600 hover:text-gray-800",title:"ç¼–è¾‘æ–‡ç« ",children:e.jsx(f,{size:12})}),e.jsx("button",{onClick:()=>{return e=n.id,t=n.title,void I({isOpen:!0,type:"danger",title:"åˆ é™¤æ–‡ç« ",message:`æ˜¯å¦è¦åˆ é™¤æ–‡ç« "${t}"ï¼Ÿ`,onConfirm:async()=>{A(!0);try{await P.deleteArticle(e),await N(!0),window.dispatchEvent(new CustomEvent("articleDeleted",{detail:{articleId:e}}))}catch(re){alert("åˆ é™¤å¤±è´¥: "+re.message)}finally{A(!1)}}});var e,t},className:"p-1 hover:bg-gray-200 rounded text-gray-600 hover:text-red-600",title:"åˆ é™¤æ–‡ç« ",children:e.jsx(b,{size:12})})]})]},n.id)}),d&&n.children.map(e=>F(e,i+1))]})]},n.id)},E=()=>e.jsx("div",{className:"animate-pulse space-y-2",children:[...Array(5)].map((t,r)=>e.jsx("div",{className:"h-8 bg-gray-200 rounded"},r))});return n?e.jsx("nav",{className:"border-r border-gray-200 bg-white fixed left-0 top-16 z-20 w-12",style:{height:"calc(100vh - 4rem)"},children:e.jsx("div",{className:"p-2",children:e.jsx("button",{onClick:i,className:"w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded",title:"å±•å¼€ç›®å½•",children:e.jsx(d,{size:16})})})}):e.jsxs(e.Fragment,{children:[e.jsxs("nav",{className:"border-r border-gray-200 bg-white fixed left-0 top-16 z-20 w-80 flex flex-col",style:{height:"calc(100vh - 4rem)"},children:[e.jsx("div",{className:"p-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 truncate",children:"æ–‡ç« ç›®å½•"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>c&&c(),className:"p-1 hover:bg-gray-100 rounded text-gray-600 hover:text-gray-800",title:"æ–°å»ºç›®å½•",children:e.jsx(m,{size:16})}),e.jsx("button",{onClick:i,className:"p-1 hover:bg-gray-100 rounded text-gray-600",title:"æ”¶èµ·ç›®å½•",children:e.jsx(u,{size:16})})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-4",children:e.jsx("div",{className:"space-y-1",children:v?e.jsx(E,{}):0===w.length?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"æš‚æ— ç›®å½•"}),e.jsx("button",{onClick:()=>c&&c(),className:"mt-2 text-blue-600 hover:text-blue-700 text-sm",children:"åˆ›å»ºç¬¬ä¸€ä¸ªç›®å½•"})]}):w.map(e=>F(e))})})]}),e.jsx(q,{isOpen:k.isOpen,onClose:()=>I({...k,isOpen:!1}),onConfirm:k.onConfirm,title:k.title,message:k.message,type:k.type}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-xl",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"å¤„ç†ä¸­..."})]})})})]})}function H({isMobile:t,onMenuClick:r}){return e.jsx("header",{className:"bg-[#001529] border-b border-gray-700 sticky top-0 z-30",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-between h-16",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[t&&e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-700 rounded-md text-white",children:e.jsx(w,{size:20})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",children:e.jsx("img",{src:"/myReact/assets/react-CC1bUvkJ.svg",alt:"logo",className:"mx-auto"})}),e.jsx("span",{className:"text-xl font-bold text-white",children:"React æ—¥è®°"})]})]})})})})}function J({content:i}){const[a,o]=s.useState(null),l=e=>"string"==typeof e?e:Array.isArray(e)?e.map(l).join(""):e&&"object"==typeof e&&e.props&&e.props.children?l(e.props.children):"",c=e=>l(e).toLowerCase().replace(/[^\w\u4e00-\u9fff]+/g,"-").replace(/^-+|-+$/g,"")||"heading",d=e=>{if("string"==typeof e)return e;if(Array.isArray(e))return e.map(d).join("");if(e&&"object"==typeof e){if(e.props&&e.props.children)return d(e.props.children);if(e.children)return d(e.children)}return""},m={pre({children:t}){const r=null==t?void 0:t.props,n=(null==r?void 0:r.className)||"",i=/language-(\w+)/.exec(n);if(i){const n=d(null==r?void 0:r.children),s=(e=>{let t=0;for(let r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return Math.abs(t).toString(36).substring(0,10)})(n.substring(0,100));return e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"flex items-center justify-between bg-gray-800 text-gray-200 px-4 py-2 text-sm rounded-t-lg",children:[e.jsx("span",{className:"font-mono",children:i[1]}),e.jsx("button",{onClick:()=>(async(e,t)=>{try{await navigator.clipboard.writeText(e),o(t),setTimeout(()=>o(null),2e3)}catch(r){}})(n,s),className:"flex items-center space-x-1 hover:bg-gray-700 px-2 py-1 rounded",children:a===s?e.jsxs(e.Fragment,{children:[e.jsx(v,{size:14}),e.jsx("span",{children:"å·²å¤åˆ¶"})]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{size:14}),e.jsx("span",{children:"å¤åˆ¶"})]})})]}),e.jsx("pre",{className:"!mt-0 !rounded-t-none overflow-x-auto",children:t})]})}return e.jsx("pre",{children:t})},code:({node:t,inline:r,className:n,children:i,...s})=>r?e.jsx("code",{className:"bg-gray-100 text-gray-800 px-1 py-0.5 rounded text-sm font-mono",...s,children:i}):e.jsx("code",{className:n,...s,children:i}),h1({children:t}){const r=c(t);return e.jsx("h1",{id:r,className:"text-3xl font-bold text-gray-900 mb-6 mt-8 border-b border-gray-200 pb-2 scroll-mt-20",children:t})},h2({children:t}){const r=c(t);return e.jsx("h2",{id:r,className:"text-2xl font-semibold text-gray-900 mb-4 mt-6 scroll-mt-20",children:t})},h3({children:t}){const r=c(t);return e.jsx("h3",{id:r,className:"text-xl font-semibold text-gray-900 mb-3 mt-5 scroll-mt-20",children:t})},p:({children:t})=>e.jsx("p",{className:"text-gray-700 leading-7 mb-4",children:t}),ul:({children:t})=>e.jsx("ul",{className:"list-disc list-inside mb-4 space-y-2 text-gray-700",children:t}),ol:({children:t})=>e.jsx("ol",{className:"list-decimal list-inside mb-4 space-y-2 text-gray-700",children:t}),blockquote:({children:t})=>e.jsx("blockquote",{className:"border-l-4 border-primary-500 pl-4 italic text-gray-600 mb-4 bg-gray-50 py-2",children:t}),table:({children:t})=>e.jsx("div",{className:"overflow-x-auto mb-4",children:e.jsx("table",{className:"w-full border-collapse border border-gray-300",children:t})}),th:({children:t})=>e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left bg-gray-50 font-semibold",children:t}),td:({children:t})=>e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t}),a:({href:t,children:r})=>e.jsx("a",{href:t,className:"text-primary-600 hover:text-primary-700 underline",target:(null==t?void 0:t.startsWith("http"))?"_blank":void 0,rel:(null==t?void 0:t.startsWith("http"))?"noopener noreferrer":void 0,children:r})};return e.jsx("div",{className:"prose max-w-none",children:e.jsx(t,{remarkPlugins:[n],rehypePlugins:[r],components:m,children:i})})}function B({article:t}){return t?e.jsxs("div",{className:"max-w-4xl mx-auto min-h-full",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:t.title}),t.description&&e.jsx("p",{className:"text-xl text-gray-600 mb-6",children:t.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{size:16,className:"mr-1"}),e.jsxs("span",{children:["å‘å¸ƒäº ",(r=t.created_at,new Date(r).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}))]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{size:16,className:"mr-1"}),e.jsxs("span",{children:["é˜…è¯»æ—¶é—´ ",(e=>{const t=e.split(/\s+/).length;return Math.ceil(t/200)})(t.content)," åˆ†é’Ÿ"]})]})]})]}),e.jsx("article",{className:"prose max-w-none pb-8",children:e.jsx(J,{content:t.content})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"æ–‡ç« ä¸å­˜åœ¨"}),e.jsx("p",{className:"text-gray-600",children:"è¯·é€‰æ‹©å…¶ä»–æ–‡ç« "})]});var r}function G({onReturnHome:t}){return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:"/myReact/assets/notfound-BvOBckcb.svg",alt:"æ–‡ç« æœªæ‰¾åˆ°",className:"w-64 h-64 mx-auto"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"ç³Ÿç³•ï¼Œè¯¥æ–‡ç« ä¸è§äº†"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"æ‚¨æ­£åœ¨æŸ¥çœ‹çš„æ–‡ç« å·²è¢«åˆ é™¤æˆ–ç§»åŠ¨"}),e.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800",children:"è¿”å›é¦–é¡µ"})]})}function U(){return e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-12",children:e.jsxs("div",{className:"max-w-4xl w-full",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl mb-6 shadow-lg",children:e.jsx(C,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"React æ—¥è®°"}),e.jsx("p",{className:"text-lg text-gray-600",children:"ä»å·¦ä¾§ç›®å½•é€‰æ‹©æ–‡ç« å¼€å§‹å­¦ä¹ "})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4 text-center",children:"å‹æƒ…é“¾æ¥"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{name:"QCloud æ–‡ä»¶äº‘ç›˜",url:"https://try-catch.life/QCloud",description:"ä¸ªäººæ–‡ä»¶äº‘å­˜å‚¨æœåŠ¡",color:"from-blue-500 to-blue-600"},{name:"ä¸ªäººåšå®¢",url:"https://try-catch.life",description:"æŠ€æœ¯åˆ†äº«ä¸ç”Ÿæ´»è®°å½•",color:"from-purple-500 to-purple-600"},{name:"DailyUp æ—¥æŠ¥ç³»ç»Ÿ",url:"https://try-catch.life/DailyUp",description:"æ¯æ—¥å·¥ä½œè®°å½•ä¸æ€»ç»“",color:"from-green-500 to-green-600"},{name:"ç´ ç¬” Markdown",url:"https://marklite.cn",description:"ç®€æ´ä¼˜é›…çš„ Markdown ç¼–è¾‘å™¨",color:"from-orange-500 to-orange-600"}].map(t=>e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"group bg-white rounded-lg p-5 shadow-sm border border-gray-200 hover:shadow-md hover:border-gray-300 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full bg-gradient-to-r ${t.color} mr-2`}),e.jsx("h3",{className:"text-base font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:t.name})]}),e.jsx("p",{className:"text-sm text-gray-600",children:t.description})]}),e.jsx(_,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-600 transition-colors flex-shrink-0 ml-2"})]})},t.url))})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-400",children:"ğŸ’¡ æç¤ºï¼šç‚¹å‡»å·¦ä¸Šè§’å›¾æ ‡å¯ä»¥å±•å¼€/æ”¶èµ·ä¾§è¾¹æ "})})]})})}function W({size:t="md",className:r=""}){return e.jsx("div",{className:`inline-flex items-center justify-center ${r}`,children:e.jsx("div",{className:`\n          ${{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"}[t]} \n          border-2 border-gray-200 border-t-gray-600 \n          rounded-full animate-spin\n        `})})}function X({message:t="åŠ è½½ä¸­...",className:r=""}){return e.jsxs("div",{className:`flex flex-col items-center justify-center py-8 ${r}`,children:[e.jsx(W,{size:"lg",className:"mb-3"}),e.jsx("p",{className:"text-gray-600 text-sm",children:t})]})}function V({loading:t,articleLoading:r,articleNotFound:n,selectedArticle:i,onReturnHome:s}){return e.jsx("main",{className:"flex-1 min-w-0 overflow-auto h-screen",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8 pb-16",children:t?e.jsx(X,{message:"æ­£åœ¨åŠ è½½..."}):r?e.jsx(X,{message:"æ­£åœ¨åŠ è½½æ–‡ç« ..."}):n?e.jsx(G,{onReturnHome:s}):i?e.jsx(B,{article:i}):e.jsx(U,{})})})}function Y({isOpen:t,onClose:r,onArticleSelect:n,directories:i,directoriesLoading:s,onLoadDirectories:a,selectedArticle:o}){return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:r}),e.jsxs("div",{className:"fixed left-0 top-0 h-full w-80 bg-white shadow-lg z-50 transform transition-transform duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"ç›®å½•"}),e.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(c,{size:20})})]}),e.jsx($,{onArticleSelect:n,onItemClick:r,directories:i,directoriesLoading:s,onLoadDirectories:a,selectedArticle:o})]})]}):null}function Q({content:t,collapsed:r,onToggleCollapse:n}){const[i,a]=s.useState([]),[o,l]=s.useState(""),c=s.useRef(null),d=s.useRef(!1),m=e=>e.toLowerCase().replace(/[^\w\u4e00-\u9fff]+/g,"-").replace(/^-+|-+$/g,"")||"heading";s.useEffect(()=>{if(!t)return void a([]);const e=/^(#{1,3})\s+(.+)$/gm,r=[];let n;for(;null!==(n=e.exec(t));){const e=n[1].length,t=n[2].trim(),i=m(t);r.push({id:i,text:t,level:e})}a(r)},[t]),s.useEffect(()=>{if(0===i.length||r)return;const e=setTimeout(()=>{const e=document.querySelector("main");if(!e)return;(()=>{if(!document.querySelector("main"))return;const e=i.map(e=>document.getElementById(e.id)).filter(Boolean);if(0===e.length)return;let t=e[0];for(const r of e){if(!(r.getBoundingClientRect().top<=100))break;t=r}l(t.id)})();const t=new IntersectionObserver(e=>{if(d.current)return;const t=e.filter(e=>e.isIntersecting).sort((e,t)=>e.boundingClientRect.top-t.boundingClientRect.top);if(t.length>0){const e=t[0];l(e.target.id)}},{root:e,rootMargin:"-10% 0% -80% 0%",threshold:[0,.25,.5,.75,1]});c.current=t,i.forEach(e=>{const r=document.getElementById(e.id);r&&t.observe(r)})},50);return()=>{clearTimeout(e),c.current&&c.current.disconnect()}},[i,r]);return r?e.jsx("div",{className:"fixed right-0 top-16 z-20 w-12 h-screen border-l border-gray-200 bg-white",children:e.jsx("div",{className:"p-2",children:e.jsx("button",{onClick:n,className:"w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded",title:"å±•å¼€ç›®å½•",children:e.jsx(A,{size:16})})})}):e.jsx("div",{className:"fixed right-0 top-16 z-20 w-64 h-screen border-l border-gray-200 bg-white",children:e.jsxs("div",{className:"p-4 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"æ ‡é¢˜ç›®å½•"}),e.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-100 rounded text-gray-600",title:"æ”¶èµ·ç›®å½•",children:e.jsx(k,{size:16})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:0===i.length?e.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:e.jsx("p",{children:"å½“å‰æ–‡ç« æ— æ ‡é¢˜"})}):e.jsx("div",{className:"space-y-1",children:i.map(t=>{const r=o===t.id,n=16*(t.level-1)+12;return e.jsx("button",{onClick:()=>(e=>{const t=document.getElementById(e);if(t){l(e),d.current=!0;const r=document.querySelector("main");if(r){const e=t.offsetTop,n=80;r.scrollTo({top:e-n,behavior:"smooth"}),setTimeout(()=>{d.current=!1},1e3)}else t.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{d.current=!1},1e3)}})(t.id),className:`\n          w-full text-left py-2 px-3 text-sm transition-colors duration-200\n          hover:bg-gray-50 hover:text-gray-900\n          ${r?"text-blue-600 bg-blue-50 border-r-2 border-blue-600":"text-gray-600"}\n        `,style:{paddingLeft:`${n}px`},title:t.text,children:e.jsx("span",{className:"truncate block",children:t.text})},t.id)})})})]})})}const K=s.lazy(()=>L(()=>import("./ArticleFormModal-BrMhYA6F.js"),__vite__mapDeps([0,1,2,3,4,5]))),ee=s.lazy(()=>L(()=>import("./DirectoryFormModal-Bb9WwZbc.js"),__vite__mapDeps([6,1,2,3,4,5])));function te(){const t=function(){const[e,t]=s.useState(!1),[r,n]=s.useState(!1),[i,a]=s.useState(!1),[o,l]=s.useState(!1),[c,d]=s.useState(!0),[m,u]=s.useState(!1),[h,x]=s.useState(!1),[p,g]=s.useState(!1),[f,y]=s.useState(!0),[b,j]=s.useState(null),[w,v]=s.useState([]),[N,S]=s.useState(null),[D,C]=s.useState(!1),[_,A]=s.useState(!1),[k,I]=s.useState(null),[F,E]=s.useState({title:"",content:"",directory_id:"",is_published:!0}),[L,T]=s.useState({name:"",parent_id:""});s.useEffect(()=>{const e=()=>{n(window.innerWidth<768),window.innerWidth>=768&&t(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),s.useEffect(()=>{(async()=>{O(!0);const e=localStorage.getItem("lastArticleId");if(e){u(!0),x(!1);try{const t=await P.getArticle(e);j(t)}catch(re){localStorage.removeItem("lastArticleId")}finally{u(!1),d(!1)}}else d(!1)})()},[]),s.useEffect(()=>{const e=e=>{const{articleId:t}=e.detail;j(e=>e&&e.id===t?(x(!0),localStorage.removeItem("lastArticleId"),null):e)},t=e=>{const{directoryId:t}=e.detail;j(e=>e&&e.directory_id===t?(x(!0),localStorage.removeItem("lastArticleId"),null):e)};return window.addEventListener("articleDeleted",e),window.addEventListener("directoryDeleted",t),()=>{window.removeEventListener("articleDeleted",e),window.removeEventListener("directoryDeleted",t)}},[]);const O=async(e=!1)=>{e&&y(!0);try{const e=await P.getDirectoryTree();v(e)}catch(re){}finally{y(!1)}},z=(e,t=0)=>{let r=[];return e.forEach(e=>{const n="ã€€".repeat(t);r.push({value:e.id,label:n+e.name}),e.children&&e.children.length>0&&(r=r.concat(z(e.children,t+1)))}),r};return{sidebarOpen:e,setSidebarOpen:t,isMobile:r,sidebarCollapsed:i,setSidebarCollapsed:a,tocCollapsed:o,setTocCollapsed:l,loading:c,articleLoading:m,articleNotFound:h,setArticleNotFound:x,formLoading:p,setFormLoading:g,directoriesLoading:f,selectedArticle:b,directories:w,editingArticle:N,setEditingArticle:S,showCreateForm:D,setShowCreateForm:C,showCreateDirForm:_,setShowCreateDirForm:A,editingDirectory:k,setEditingDirectory:I,formData:F,setFormData:E,dirFormData:L,setDirFormData:T,loadDirectories:O,loadFirstArticle:async()=>{u(!0);try{const e=await P.searchArticles("");e&&e.length>0&&j(e[0])}catch(re){}finally{d(!1),u(!1)}},handleArticleSelect:async e=>{u(!0),x(!1);try{const n=await P.getArticle(e);j(n),localStorage.setItem("lastArticleId",e),r&&t(!1)}catch(re){x(!0),localStorage.removeItem("lastArticleId")}finally{u(!1),d(!1)}},getDirectoryOptions:z}}(),r=function({setFormLoading:e,loadFirstArticle:t,loadDirectories:r,setFormData:n,setEditingArticle:i,setShowCreateForm:s}){const a=()=>{n({title:"",content:"",directory_id:"",is_published:!0}),i(null),s(!1)};return{handleEditArticle:e=>{i(e),n({title:e.title,content:e.content,directory_id:e.directory_id||"",is_published:e.is_published}),s(!0)},handleSubmitArticle:async(n,i,s)=>{n.preventDefault(),e(!0);try{s?await P.updateArticle(s.id,i):await P.createArticle(i),a(),await r(!0),await t()}catch(re){alert("ä¿å­˜å¤±è´¥: "+re.message)}finally{e(!1)}},resetForm:a}}({setFormLoading:t.setFormLoading,loadFirstArticle:t.loadFirstArticle,loadDirectories:t.loadDirectories,setFormData:t.setFormData,setEditingArticle:t.setEditingArticle,setShowCreateForm:t.setShowCreateForm}),n=function({setFormLoading:e,loadDirectories:t,setDirFormData:r,setEditingDirectory:n,setShowCreateDirForm:i}){const s=()=>{r({name:"",parent_id:""}),n(null),i(!1)};return{handleCreateDirectory:()=>{n(null),r({name:"",parent_id:""}),i(!0)},handleEditDirectory:e=>{n(e),r({name:e.name,parent_id:e.parent_id||""}),i(!0)},handleSubmitDirectory:async(r,n,i)=>{if(r.preventDefault(),n.name.trim()){e(!0);try{const e={name:n.name.trim(),parent_id:n.parent_id||null};i?await P.updateDirectory(i.id,e):await P.createDirectory(e),s(),await t(!0)}catch(re){alert("ä¿å­˜ç›®å½•å¤±è´¥: "+re.message)}finally{e(!1)}}else alert("è¯·è¾“å…¥ç›®å½•åç§°")},resetDirForm:s}}({setFormLoading:t.setFormLoading,loadDirectories:t.loadDirectories,setDirFormData:t.setDirFormData,setEditingDirectory:t.setEditingDirectory,setShowCreateDirForm:t.setShowCreateDirForm});return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(H,{isMobile:t.isMobile,onMenuClick:()=>t.setSidebarOpen(!0)}),e.jsxs("div",{className:"flex relative",children:[!t.isMobile&&e.jsx("div",{className:(t.sidebarCollapsed?"w-12":"w-80")+" flex-shrink-0",children:e.jsx($,{onArticleSelect:t.handleArticleSelect,collapsed:t.sidebarCollapsed,onToggleCollapse:()=>t.setSidebarCollapsed(!t.sidebarCollapsed),onEditArticle:r.handleEditArticle,onCreateArticle:e=>{t.setFormData({...t.formData,directory_id:e}),t.setShowCreateForm(!0)},onEditDirectory:n.handleEditDirectory,onCreateDirectory:n.handleCreateDirectory,directories:t.directories,directoriesLoading:t.directoriesLoading,onLoadDirectories:t.loadDirectories,selectedArticle:t.selectedArticle})}),e.jsx(Y,{isOpen:t.sidebarOpen,onClose:()=>t.setSidebarOpen(!1),onArticleSelect:t.handleArticleSelect,directories:t.directories,directoriesLoading:t.directoriesLoading,onLoadDirectories:t.loadDirectories,selectedArticle:t.selectedArticle}),e.jsx(V,{loading:t.loading,articleLoading:t.articleLoading,articleNotFound:t.articleNotFound,selectedArticle:t.selectedArticle,onReturnHome:()=>{t.setArticleNotFound(!1),t.loadFirstArticle()}}),!t.isMobile&&t.selectedArticle&&!t.articleNotFound&&e.jsx("div",{className:(t.tocCollapsed?"w-12":"w-64")+" flex-shrink-0",children:e.jsx(Q,{content:t.selectedArticle.content,collapsed:t.tocCollapsed,onToggleCollapse:()=>t.setTocCollapsed(!t.tocCollapsed)})}),e.jsx(s.Suspense,{fallback:null,children:e.jsx(K,{isOpen:t.showCreateForm,editingArticle:t.editingArticle,formData:t.formData,directories:t.directories,formLoading:t.formLoading,onClose:r.resetForm,onSubmit:e=>r.handleSubmitArticle(e,t.formData,t.editingArticle),onFormDataChange:t.setFormData,getDirectoryOptions:t.getDirectoryOptions})}),e.jsx(s.Suspense,{fallback:null,children:e.jsx(ee,{isOpen:t.showCreateDirForm,editingDirectory:t.editingDirectory,dirFormData:t.dirFormData,directories:t.directories,formLoading:t.formLoading,onClose:n.resetDirForm,onSubmit:e=>n.handleSubmitDirectory(e,t.dirFormData,t.editingDirectory),onFormDataChange:t.setDirFormData,getDirectoryOptions:t.getDirectoryOptions})})]})]})}I.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(te,{})}));export{W as L};
